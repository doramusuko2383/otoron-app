<!DOCTYPE html>
<html lang="ja">
<head>
  <title>決済完了</title>
  <link rel="icon" href="/favicon.ico" />
</head>
<body style="margin:0;">
  <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#fff;text-align:center;">
    <img src="../images/payment-success.webp" alt="絶対音感トレーニングアプリ『オトロン』決済完了を示す画像" style="max-width:80%;max-height:80vh;height:auto" />
    <p style="margin-top:1rem;color:#666">3秒後にホーム画面に戻ります</p>
  </div>
  <script type="module">
    import { AuthController } from '../src/authController.js';

    const params = new URLSearchParams(location.search);
    const plan = params.get('plan');

    const auth = AuthController.get();
    await auth.init();
    const user = auth.user;
    if (user && plan) {
      // 決済完了後のDB更新はサーバ側のWebhookで処理される想定
    }

    setTimeout(() => {
      window.location.href = '/#home';
    }, 3000);
  </script>
</body>
</html>
